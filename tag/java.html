<!DOCTYPE html>
<html lang="en">
<head>
        <title>A Blog - Java</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie.css"/>
                <script src="/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
<a href="https://github.com/we-taper">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="">A Blog  <strong>about Coding.</strong></a></h1>
                <nav>
                    <a href="/pages/who-am-i.html">Who am I?</a>&nbsp;
                    <a href="/category/blogging.html">Blogging</a>&nbsp;
                    <a href="/category/computer_tips.html">Computer_Tips</a>&nbsp;
                    <a href="/category/coursenote.html">CourseNote</a>&nbsp;
                    <a href="/category/programming.html">Programming</a>&nbsp;
                </nav>
        </header><!-- /#banner -->
        
        

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/assertion-another-way-to-commment-debug.html">Assertion - Another Way to Commment & Debug</a></h1> 
<footer class="post-info">
        <abbr class="published" title="2014-04-17T00:00:00">
                周四 17 四月 2014
        </abbr>
<p>tags: <a href="/tag/java.html">Java</a><a href="/tag/programming.html">Programming</a></p></footer><!-- /.post-info --><p>Assertion is a claim, which says that you believe something must be true. In Programming, it acts as an check of the status of something. For example, if you want to find the maximum value of an <code>int[]</code> array, you should make sure that is index lies within the range. So:</p>
<div class="highlight"><pre><span class="n">assert</span> <span class="nf">withinRange</span><span class="p">(</span><span class="n">index</span><span class="p">);</span>
</pre></div>


<p>Now, you can proceed to the next process with confidence.</p>
<h2>0. Enable assertion</h2>
<p>Assert code will be contained in <em>.class</em> file. However, JVM does run this code by default. This is because assertion is designed for programmers to debug and comment on their code. It is not intended to be included in published program. Therefore, by default assertion is disabled in JVM to prevent end user from seeing this. Before we use assert in our program, we must first enable it. We should enable them by passing <code>"-enableassertion"</code> or <code>"-ea"</code> to JVM. E.g.:</p>
<div class="highlight"><pre><span class="n">java</span> <span class="o">-</span><span class="n">ea</span> <span class="n">ClassName</span>
</pre></div>


<h2>1. The Grammar</h2>
<p>Syntax for assertion is:</p>
<div class="highlight"><pre><span class="n">assert</span> <span class="n">Exp1</span><span class="p">;</span>
</pre></div>


<p>or</p>
<div class="highlight"><pre><span class="n">assert</span> <span class="n">Exp1</span><span class="o">:</span><span class="n">Exp2</span><span class="p">;</span>
</pre></div>


<p>Here, <code>Exp1</code> is the condition that you want to check and will return a boolean value. If the boolean is true, program proceeds normally. However, if your assertion is wrong and <code>Exp1</code> returns false, program stops immediately and there will be an <code>AssertionError</code> thrown with message provided by <code>Exp2</code> if available. Now, you can deal with this error with the message provided by <code>Exp2</code>.</p>
<h2>2. An Example</h2>
<p>Suppose you have two arraies, both sorted in ascending order. You would like to merge them together in good order. Here's a pesudocode:</p>
<div class="highlight"><pre><span class="cp"># Input array a,b</span>
<span class="n">resultArray</span> <span class="o">=</span> <span class="n">a</span> <span class="n">new</span> <span class="n">array</span> <span class="n">of</span> <span class="n">size</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span>
<span class="n">currentOne</span> <span class="o">=</span> <span class="n">last</span> <span class="n">index</span> <span class="n">of</span> <span class="n">resultArray</span>
<span class="n">currentA</span> <span class="o">=</span> <span class="n">last</span> <span class="n">index</span> <span class="n">of</span> <span class="n">a</span><span class="p">;</span>
<span class="n">currentB</span> <span class="o">=</span> <span class="n">last</span> <span class="n">index</span> <span class="n">of</span> <span class="n">b</span><span class="p">;</span>
<span class="k">do</span><span class="p">{</span>
    <span class="n">resultArray</span><span class="p">[</span><span class="n">currentOne</span><span class="p">]</span> <span class="o">=</span> <span class="n">MaximumOf</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">currentA</span><span class="p">],</span><span class="n">b</span><span class="p">[</span><span class="n">currentB</span><span class="p">])</span>
    <span class="n">currentOne</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="n">currentA</span> <span class="o">-=</span> <span class="mi">1</span> <span class="n">or</span> <span class="n">currentB</span> <span class="o">-=</span> <span class="mi">1</span> <span class="p">(</span><span class="n">depends</span> <span class="n">on</span> <span class="n">which</span> <span class="n">is</span> <span class="n">added</span> <span class="n">to</span> <span class="n">resultArray</span><span class="p">)</span>
<span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="n">currentOne</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>


<p>Here we should assume that the index of resultArray, a, b (currentOne, currentA, currentB) are reasonable, so:</p>
<div class="highlight"><pre><span class="cp"># Input array a,b</span>
<span class="n">resultArray</span> <span class="o">=</span> <span class="n">a</span> <span class="n">new</span> <span class="n">array</span> <span class="n">of</span> <span class="n">size</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span>
<span class="n">currentOne</span> <span class="o">=</span> <span class="n">last</span> <span class="n">index</span> <span class="n">of</span> <span class="n">resultArray</span>
<span class="n">currentA</span> <span class="o">=</span> <span class="n">last</span> <span class="n">index</span> <span class="n">of</span> <span class="n">a</span><span class="p">;</span>
<span class="n">currentB</span> <span class="o">=</span> <span class="n">last</span> <span class="n">index</span> <span class="n">of</span> <span class="n">b</span><span class="p">;</span>
<span class="k">do</span><span class="p">{</span>
    <span class="n">assert</span> <span class="n">currentOne</span><span class="p">,</span> <span class="n">currentA</span><span class="p">,</span> <span class="n">currentB</span> <span class="n">within</span> <span class="n">range</span><span class="p">;</span>
    <span class="n">resultArray</span><span class="p">[</span><span class="n">currentOne</span><span class="p">]</span> <span class="o">=</span> <span class="n">MaximumOf</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">currentA</span><span class="p">],</span><span class="n">b</span><span class="p">[</span><span class="n">currentB</span><span class="p">])</span>
    <span class="n">currentOne</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="n">currentA</span> <span class="o">-=</span> <span class="mi">1</span> <span class="n">or</span> <span class="n">currentB</span> <span class="o">-=</span> <span class="mi">1</span> <span class="p">(</span><span class="n">depends</span> <span class="n">on</span> <span class="n">which</span> <span class="n">is</span> <span class="n">added</span> <span class="n">to</span> <span class="n">resultArray</span><span class="p">)</span>
<span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="n">currentOne</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>


<p>The resulting code in java would be something like this:</p>
<div class="highlight"><pre><span class="c1">// Input a,b two arrays, return array</span>
<span class="k">int</span> <span class="n">aCurnt</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">length</span> <span class="o">-</span> <span class="mh">1</span><span class="p">,</span> <span class="n">bCurnt</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">length</span> <span class="o">-</span> <span class="mh">1</span><span class="p">,</span> <span class="n">arrayCurnt</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="n">length</span> <span class="o">-</span> <span class="mh">1</span><span class="p">;</span>
<span class="k">do</span><span class="p">{</span>
    <span class="k">assert</span> <span class="n">aCurnt</span> <span class="o">&gt;=</span> <span class="mh">0</span> <span class="o">:</span> <span class="s">&quot;aCur:&quot;</span><span class="o">+</span><span class="n">aCurnt</span><span class="p">;</span>
    <span class="k">assert</span> <span class="n">bCurnt</span> <span class="o">&gt;=</span> <span class="mh">0</span> <span class="o">:</span> <span class="s">&quot;bCur:&quot;</span><span class="o">+</span><span class="n">bCurnt</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">aCurnt</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">[</span><span class="n">bCurnt</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">array</span><span class="p">[</span><span class="n">arrayCurnt</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">aCurnt</span><span class="p">];</span>
        <span class="n">aCurnt</span> <span class="o">-=</span> <span class="mh">1</span><span class="p">;</span> <span class="n">arrayCurnt</span> <span class="o">-=</span> <span class="mh">1</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="k">assert</span> <span class="n">a</span><span class="p">[</span><span class="n">aCurnt</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">b</span><span class="p">[</span><span class="n">bCurnt</span><span class="p">];</span>
        <span class="n">array</span><span class="p">[</span><span class="n">arrayCurnt</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="n">bCurnt</span><span class="p">];</span>
        <span class="n">bCurnt</span> <span class="o">-=</span> <span class="mh">1</span><span class="p">;</span> <span class="n">arrayCurnt</span> <span class="o">-=</span> <span class="mh">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span><span class="k">while</span><span class="p">(</span> <span class="n">arrayCurnt</span> <span class="o">&gt;=</span> <span class="mh">0</span> <span class="p">);</span>
<span class="k">return</span> <span class="n">array</span><span class="p">;</span>
</pre></div>


<h2>3. Why Using Assertion</h2>
<h3>Quick Prototype</h3>
<p>Using assertions</p>
<h1>To Be Continued</h1>
<h2>Reference</h2>
<p>1.<a href="http://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html">Oracle Java SE Documentation</a></p><p>There are <a href="/assertion-another-way-to-commment-debug.html#disqus_thread">comments</a>.</p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <hr />
                    <ol id="posts-list" class="hfeed">
        

 
            <li><article class="hentry">    
                <header>
                    <h3><a href="/utf-8-bom-detection-in-java.html" rel="bookmark"
                           title="Permalink to UTF 8 BOM Detection in Java">UTF 8 BOM Detection in Java</a></h3>
                </header>
                
                <div class="entry-content">
                <h1>UTF 8 BOM Detection in Java</h1>
<p>Have you ever encountered ...</p>
                <a class="readmore" href="/utf-8-bom-detection-in-java.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
        

 
            <li><article class="hentry">    
                <header>
                    <h3><a href="/read-different-encoding-in-java.html" rel="bookmark"
                           title="Permalink to Read Different Encoding in Java">Read Different Encoding in Java</a></h3>
                </header>
                
                <div class="entry-content">
                <p>Show how to read files in different encodings in Java</p>
                <a class="readmore" href="/read-different-encoding-in-java.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
            </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 1
</p>
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://ovelinux.blog.sohu.com/">My Previous Blog</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="we.taper[WhateverInsideIsUseless]qq.com">My E-Mail (Don't click, copy link and alter it to correct form, thx)</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                     Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>. Theme is using <a href="http://github.com/getpelican/pelican-themes" target="_blank">cebong</a>.
                </address><!-- /#about -->

        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'taper';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>